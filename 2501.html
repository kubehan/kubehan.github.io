<!doctype html><html lang=zh-cn dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Redis相关命令及安全技术 &#183; 云原生知识栈</title>
<meta name=title content="Redis相关命令及安全技术 &#183; 云原生知识栈"><meta name=description content="云原生知识栈：一个专注于容器技术、Kubernetes、Istio、DevOps 实践、Prometheus 监控、Envoy 代理、Golang 开发以及云原生架构和微服务趋势的深度解析的专业博客。我们致力于为技术爱好者和从业者提供最新的行业动态、实战经验和技术教程，帮助您更好地理解和应用云原生技术。"><link rel=canonical href=https://kubehan.cn/2501.html><link type=text/css rel=stylesheet href=/css/main.bundle.min.e27868ab1485f7ed7b06b122b4980bd38b19526eb8f7de885181204d28f04a0c47e9c334eff19a06c0278eb2ff8415b983a5d0fb80fd6b5680c926457cc61c57.css integrity="sha512-4nhoqxSF9+17BrEitJgL04sZUm64996IUYEgTSjwSgxH6cM07/GaBsAnjrL/hBW5g6XQ+4D9a1aAySZFfMYcVw=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.a2d78d78672e549fbfc972ece871725b5478ba0b65708dda20cb97ab80a865eae6d247e1b05a4aec6ebbf78647ec3233bad8b2609ed98eee53cd58aa17128bc7.js integrity="sha512-oteNeGcuVJ+/yXLs6HFyW1R4ugtlcI3aIMuXq4CoZerm0kfhsFpK7G6794ZH7DIzutiyYJ7Zju5TzViqFxKLxw==" data-copy data-copied></script><script src=/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://kubehan.cn/2501.html"><meta property="og:site_name" content="云原生知识栈"><meta property="og:title" content="Redis相关命令及安全技术"><meta property="og:description" content="云原生知识栈：一个专注于容器技术、Kubernetes、Istio、DevOps 实践、Prometheus 监控、Envoy 代理、Golang 开发以及云原生架构和微服务趋势的深度解析的专业博客。我们致力于为技术爱好者和从业者提供最新的行业动态、实战经验和技术教程，帮助您更好地理解和应用云原生技术。"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-07T13:05:36+08:00"><meta property="article:modified_time" content="2020-05-07T13:05:36+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redis相关命令及安全技术"><meta name=twitter:description content="云原生知识栈：一个专注于容器技术、Kubernetes、Istio、DevOps 实践、Prometheus 监控、Envoy 代理、Golang 开发以及云原生架构和微服务趋势的深度解析的专业博客。我们致力于为技术爱好者和从业者提供最新的行业动态、实战经验和技术教程，帮助您更好地理解和应用云原生技术。"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Redis相关命令及安全技术","headline":"Redis相关命令及安全技术","inLanguage":"zh-cn","url":"https:\/\/kubehan.cn\/2501.html","author":{"@type":"Person","name":"Kubehan"},"copyrightYear":"2020","dateCreated":"2020-05-07T13:05:36\u002b08:00","datePublished":"2020-05-07T13:05:36\u002b08:00","dateModified":"2020-05-07T13:05:36\u002b08:00","mainEntityOfPage":"true","wordCount":"5551"}]</script><meta name=author content="Kubehan"><link href=/index.xml rel=me><link href=https://twitter.com/kubehan rel=me><link href=https://github.com/kubehan rel=me><link href=https://github.com/kubehan rel=me><link href=mailto:hello@kubehan.cn rel=me><link href=https://kubehan.cn/ rel=me><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script data-id=umami-script async src=https://kubehan.cn/ data-website-id=b40dc4fa-2041-472e-a0eb-aed0dec80ca6></script><script type=text/javascript>document.querySelector('script[data-id="umami-script"]').addEventListener("load",function(){const e=document.head.querySelector('meta[property = "og:type"]').getAttribute("content");let t=document.head.querySelector('meta[property = "og:title"]').getAttribute("content"),n=document.head.querySelector('meta[property = "og:url"]').getAttribute("content");umami.track(e+":"+t,{url:n})})</script><script defer src=https://cloud.umami.is/script.js data-website-id=b40dc4fa-2041-472e-a0eb-aed0dec80ca6></script><script>document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("link");e.href="https://jsd.onmicrosoft.cn/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css",e.rel="stylesheet",document.head.appendChild(e)})</script><div id=fps style=z-index:999;position:fixed;bottom:3px;right:3px;color:#fff;font-size:10px></div><script defer type=text/javascript src=https://cdn.staticfile.org/layer/3.5.1/layer.min.js></script><script defer type=text/javascript src=https://kubehan.cn/js/fps.js></script><script defer>function loadScriptOnScroll(){var e,t,n,s=window.scrollY||window.pageYOffset;s>100&&(n=n||[],e=document.createElement("script"),e.src="https://hm.baidu.com/hm.js?ebf00ccd579b3755eab3556650cd2b9e",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t),window.removeEventListener("scroll",loadScriptOnScroll))}window.addEventListener("scroll",loadScriptOnScroll)</script><script defer>function loadClarityScript(){(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","m535olg9md"),window.removeEventListener("scroll",onScrollLoadClarity)}function onScrollLoadClarity(){window.scrollY>100&&loadClarityScript()}window.addEventListener("scroll",onScrollLoadClarity)</script><div class=top-scroll-bar style=height:5px;background-color:blue;width:0;position:fixed;top:0;z-index:100></div><script type=text/javascript>$(document).ready(function(){$(window).scroll(function(){$(".top-scroll-bar").attr("style","width: "+$(this).scrollTop()/($(document).height()-$(this).height())*100+"%; display: block;")})})</script><script type=text/javascript>var titleTime,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="哥哥，过来玩一会呀 Σ(っ °Д °;)っ",clearTimeout(titleTime)):(document.title="你可算回来了 (｡•ˇ‸ˇ•｡)"+OriginTitile,titleTime=setTimeout(function(){document.title=OriginTitile},2e3))})</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">云原生知识栈</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=https://github.com/kubehan/PromAI.git target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium" title>项目</p></a><a href=https://kubehan.cn/categories target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M496 256c0 137-111 248-248 248-25.6.0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8.0 128.7-68.8 128.7-154.3.0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1.0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6.0-54.7 41.4-107.6 112-107.6 60.9.0 103.6 41.5 103.6 100.9.0 67.1-33.9 113.6-78 113.6-24.3.0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6.0-19-10.2-34.9-31.4-34.9-24.9.0-44.9 25.7-44.9 60.2.0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9.0 361.1.0 256 0 119 111 8 248 8s248 111 248 248z"/></svg></span></span><p class="text-base font-medium" title>专题</p></a><a href=https://kubehan.cn/categories target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></span><p class="text-base font-medium" title=分类>分类</p></a><a href=https://cloud.umami.is/share/LqtNCgFal91I2r5Q/kubehan.cn target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span><p class="text-base font-medium" title>实时访客</p></a><div><div class="cursor-pointer flex items-center nested-menu"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M159.3 5.4c7.8-7.3 19.9-7.2 27.7.1 27.6 25.9 53.5 53.8 77.7 84 11-14.4 23.5-30.1 37-42.9 7.9-7.4 20.1-7.4 28 .1 34.6 33 63.9 76.6 84.5 118 20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512 98.4 512 0 404.1.0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3.0 47.7-7 68.8-21 42.1-29.4 53.4-88.2 28.1-134.4-2.8-5.6-5.6-11.2-9.8-16.8l-50.6 58.8S180.8 199 175.1 192c-42 51.8-63.1 81.2-63.1 114.8C112 375.4 162.6 416 225.7 416z"/></svg>
</span></span><a class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>百宝箱
</a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=https://stats.uptimerobot.com/icGQsnFRda target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1></span><p class="text-sm font-sm" title>服务监控</p></a><a href=https://us.umami.is/websites/1055879b-effb-4eab-acce-174829f6a5c5 target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1></span><p class="text-sm font-sm" title>共享文本</p></a><a href=https://icloudnative.io/jstc/ target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M0 96C0 60.7 28.7 32 64 32H448c35.3.0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3.0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4S78.8 416 88 416h96 32H424c8.9.0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192c26.5.0 48-21.5 48-48s-21.5-48-48-48-48 21.5-48 48 21.5 48 48 48z"/></svg></span></span><p class="text-sm font-sm" title>趣味截图</p></a></div></div></div></div><a href=/index.xml class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM128 416c0 35.3-28.7 64-64 64S0 451.3.0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg></span></span><p class="text-base font-medium" title=rss></p></a><a href=https://twitter.com/kubehan target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></span><p class="text-base font-medium" title=twitter></p></a><a href=https://github.com/kubehan target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium" title=github></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400" style=margin-right:5px><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=https://github.com/kubehan/PromAI.git target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg" title>项目</p></a></li><li class=mt-1><a href=https://kubehan.cn/categories target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M496 256c0 137-111 248-248 248-25.6.0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8.0 128.7-68.8 128.7-154.3.0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1.0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6.0-54.7 41.4-107.6 112-107.6 60.9.0 103.6 41.5 103.6 100.9.0 67.1-33.9 113.6-78 113.6-24.3.0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6.0-19-10.2-34.9-31.4-34.9-24.9.0-44.9 25.7-44.9 60.2.0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9.0 361.1.0 256 0 119 111 8 248 8s248 111 248 248z"/></svg></span></div><p class="text-bg font-bg" title>专题</p></a></li><li class=mt-1><a href=https://kubehan.cn/categories target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><p class="text-bg font-bg" title=分类>分类</p></a></li><li class=mt-1><a href=https://cloud.umami.is/share/LqtNCgFal91I2r5Q/kubehan.cn target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></div><p class="text-bg font-bg" title>实时访客</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M159.3 5.4c7.8-7.3 19.9-7.2 27.7.1 27.6 25.9 53.5 53.8 77.7 84 11-14.4 23.5-30.1 37-42.9 7.9-7.4 20.1-7.4 28 .1 34.6 33 63.9 76.6 84.5 118 20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512 98.4 512 0 404.1.0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3.0 47.7-7 68.8-21 42.1-29.4 53.4-88.2 28.1-134.4-2.8-5.6-5.6-11.2-9.8-16.8l-50.6 58.8S180.8 199 175.1 192c-42 51.8-63.1 81.2-63.1 114.8C112 375.4 162.6 416 225.7 416z"/></svg></span></span><p class="text-bg font-bg" title>百宝箱</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=https://stats.uptimerobot.com/icGQsnFRda target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1></span><p class="text-sm font-small" title>服务监控</p></a></li><li class=mt-1><a href=https://us.umami.is/websites/1055879b-effb-4eab-acce-174829f6a5c5 target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1></span><p class="text-sm font-small" title>共享文本</p></a></li><li class=mt-1><a href=https://icloudnative.io/jstc/ target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M0 96C0 60.7 28.7 32 64 32H448c35.3.0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3.0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4S78.8 416 88 416h96 32H424c8.9.0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192c26.5.0 48-21.5 48-48s-21.5-48-48-48-48 21.5-48 48 21.5 48 48 48z"/></svg></span></span><p class="text-sm font-small" title>趣味截图</p></a></li><li class=mb-2></li><li class=mt-1><a href=/index.xml class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM128 416c0 35.3-28.7 64-64 64S0 451.3.0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg></span></div><p class="text-bg font-bg" title=rss></p></a></li><li class=mt-1><a href=https://twitter.com/kubehan target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></div><p class="text-bg font-bg" title=twitter></p></a></li><li class=mt-1><a href=https://github.com/kubehan target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg" title=github></p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>云原生知识栈</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/2501.html>Redis相关命令及安全技术</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Redis相关命令及安全技术</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2020-05-07T13:05:36+08:00>2020年05月07日</time><span class="px-2 text-primary-500">&#183;</span><span>5551 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>27 分钟</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/kubehan/kubehanBooks/tree/main/content/posts/2020-05-07-redis%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4%e5%8f%8a%e5%ae%89%e5%85%a8%e6%8a%80%e6%9c%af.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title=编辑内容><span class="inline-block align-text-bottom"><span class="relative block icon"><svg height="1em" viewBox="0 0 512 512"><path fill="currentcolor" d="M441 58.9 453.1 71c9.4 9.4 9.4 24.6.0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9.0zM209.8 256.2 344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1L186.9 325l16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25 175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 1e2c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l1e2-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7.0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4.0 152V424c0 48.6 39.4 88 88 88H360c48.6.0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1.0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H2e2c13.3.0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg></span></span></a></span></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=Kubehan src=/img/blowfish_logo_hu10440971084165979012.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">作者</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Kubehan</div><div class="text-sm text-neutral-700 dark:text-neutral-400">云原生知识栈：深度解析容器技术、Kubernetes、Istio、DevOps 实践、Prometheus 监控、Envoy 代理、Golang 开发及云原生架构与微服务趋势的专业博客</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=/index.xml target=_blank aria-label=Rss rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM128 416c0 35.3-28.7 64-64 64S0 451.3.0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/kubehan target=_blank aria-label=X-Twitter rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/kubehan target=_blank aria-label=Wechat rel="me noopener noreferrer"><span class="inline-block align-text-bottom"></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/kubehan target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:hello@kubehan.cn target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://kubehan.cn/ target=_blank aria-label=Link rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentcolor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p>Redis相关命令及安全技术<br>Redis 数据类型<br>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)。</p><p>String（字符串）<br>string 是 redis 最基本的类型，你可以理解成与 Memcached 一模一样的类型，一个 key 对应一个 value。<br>string 类型是二进制安全的。意思是 redis 的 string 可以包含任何数据。比如jpg图片或者序列化的对象。<br>string 类型是 Redis 最基本的数据类型，string 类型的值最大能存储 512MB。<br>实例<br>redis 127.0.0.1:6379> SET name &ldquo;runoob&rdquo;<br>OK<br>redis 127.0.0.1:6379> GET name<br>&ldquo;runoob&rdquo;<br>在以上实例中我们使用了 Redis 的 SET 和 GET 命令。键为 name，对应的值为 runoob。<br>注意：一个键最大能存储512MB。</p><p>Hash（哈希）<br>Redis hash 是一个键值(key=>value)对集合。<br>Redis hash 是一个 string 类型的 field 和 value 的映射表，hash 特别适合用于存储对象。<br>实例<br>redis> HMSET myhash field1 &ldquo;Hello&rdquo; field2 &ldquo;World&rdquo;<br>&ldquo;OK&rdquo;<br>redis> HGET myhash field1<br>&ldquo;Hello&rdquo;<br>redis> HGET myhash field2<br>&ldquo;World&rdquo;<br>实例中我们使用了 Redis HMSET, HGET 命令，HMSET 设置了两个 field=>value 对, HGET 获取对应 field 对应的 value。<br>每个 hash 可以存储 232 -1 键值对（40多亿）。</p><p>List（列表）<br>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。<br>实例<br>redis 127.0.0.1:6379> lpush runoob redis<br>(integer) 1<br>redis 127.0.0.1:6379> lpush runoob mongodb<br>(integer) 2<br>redis 127.0.0.1:6379> lpush runoob rabitmq<br>(integer) 3<br>redis 127.0.0.1:6379> lrange runoob 0 10</p><ol><li>&ldquo;rabitmq&rdquo;</li><li>&ldquo;mongodb&rdquo;</li><li>&ldquo;redis&rdquo;<br>redis 127.0.0.1:6379><br>列表最多可存储 232 - 1 元素 (4294967295, 每个列表可存储40多亿)。</li></ol><p>Set（集合）<br>Redis的Set是string类型的无序集合。<br>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。<br>sadd 命令<br>添加一个 string 元素到 key 对应的 set 集合中，成功返回1，如果元素已经在集合中返回 0，如果 key 对应的 set 不存在则返回错误。<br>sadd key member<br>实例<br>redis 127.0.0.1:6379> sadd runoob redis<br>(integer) 1<br>redis 127.0.0.1:6379> sadd runoob mongodb<br>(integer) 1<br>redis 127.0.0.1:6379> sadd runoob rabitmq<br>(integer) 1<br>redis 127.0.0.1:6379> sadd runoob rabitmq<br>(integer) 0<br>redis 127.0.0.1:6379> smembers runoob</p><ol><li>&ldquo;redis&rdquo;</li><li>&ldquo;rabitmq&rdquo;</li><li>&ldquo;mongodb&rdquo;<br>注意：以上实例中 rabitmq 添加了两次，但根据集合内元素的唯一性，第二次插入的元素将被忽略。<br>集合中最大的成员数为 232 - 1(4294967295, 每个集合可存储40多亿个成员)。</li></ol><p>zset(sorted set：有序集合)<br>Redis zset 和 set 一样也是string类型元素的集合,且不允许重复的成员。<br>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。<br>zset的成员是唯一的,但分数(score)却可以重复。<br>zadd 命令<br>添加元素到集合，元素在集合中存在则更新对应score<br>zadd key score member<br>实例<br>redis 127.0.0.1:6379> zadd runoob 0 redis<br>(integer) 1<br>redis 127.0.0.1:6379> zadd runoob 0 mongodb<br>(integer) 1<br>redis 127.0.0.1:6379> zadd runoob 0 rabitmq<br>(integer) 1<br>redis 127.0.0.1:6379> zadd runoob 0 rabitmq<br>(integer) 0<br>redis 127.0.0.1:6379> > ZRANGEBYSCORE runoob 0 1000</p><ol><li>&ldquo;mongodb&rdquo;</li><li>&ldquo;rabitmq&rdquo;</li><li>&ldquo;redis&rdquo;<br>Redis 命令<br>Redis 命令用于在 redis 服务上执行操作。<br>要在 redis 服务上执行命令需要一个 redis 客户端。Redis 客户端在我们之前下载的的 redis 的安装包中。<br>语法<br>Redis 客户端的基本语法为：<br>$ redis-cli<br>实例<br>以下实例讲解了如何启动 redis 客户端：<br>启动 redis 客户端，打开终端并输入命令 redis-cli。该命令会连接本地的 redis 服务。<br>$redis-cli<br>redis 127.0.0.1:6379><br>redis 127.0.0.1:6379> PING</li></ol><p>PONG<br>在以上实例中我们连接到本地的 redis 服务并执行 PING 命令，该命令用于检测 redis 服务是否启动。</p><p>在远程服务上执行命令<br>如果需要在远程 redis 服务上执行命令，同样我们使用的也是 redis-cli 命令。<br>语法<br>$ redis-cli -h host -p port -a password<br>实例<br>以下实例演示了如何连接到主机为 127.0.0.1，端口为 6379 ，密码为 mypass 的 redis 服务上。<br>$redis-cli -h 127.0.0.1 -p 6379 -a &ldquo;mypass&rdquo;<br>redis 127.0.0.1:6379><br>redis 127.0.0.1:6379> PING</p><p>PONG<br>Redis 键(key)<br>Redis 键命令用于管理 redis 的键。<br>语法<br>Redis 键命令的基本语法如下：<br>redis 127.0.0.1:6379> COMMAND KEY_NAME<br>实例<br>redis 127.0.0.1:6379> SET runoobkey redis<br>OK<br>redis 127.0.0.1:6379> DEL runoobkey<br>(integer) 1<br>在以上实例中 DEL 是一个命令， runoobkey 是一个键。 如果键被删除成功，命令执行后输出 (integer) 1，否则将输出 (integer) 0</p><p>Redis keys 命令<br>下表给出了与 Redis 键相关的基本命令：<br>序号 命令及描述<br>1 DEL key<br>该命令用于在 key 存在时删除 key。<br>2 DUMP key<br>序列化给定 key ，并返回被序列化的值。<br>3 EXISTS key<br>检查给定 key 是否存在。<br>4 EXPIRE key seconds<br>为给定 key 设置过期时间，以秒计。<br>5 EXPIREAT key timestamp<br>EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。<br>6 PEXPIRE key milliseconds<br>设置 key 的过期时间以毫秒计。<br>7 PEXPIREAT key milliseconds-timestamp<br>设置 key 过期时间的时间戳(unix timestamp) 以毫秒计<br>8 KEYS pattern<br>查找所有符合给定模式( pattern)的 key 。<br>9 MOVE key db<br>将当前数据库的 key 移动到给定的数据库 db 当中。<br>10 PERSIST key<br>移除 key 的过期时间，key 将持久保持。<br>11 PTTL key<br>以毫秒为单位返回 key 的剩余的过期时间。<br>12 TTL key<br>以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)。<br>13 RANDOMKEY<br>从当前数据库中随机返回一个 key 。<br>14 RENAME key newkey<br>修改 key 的名称<br>15 RENAMENX key newkey<br>仅当 newkey 不存在时，将 key 改名为 newkey 。<br>16 TYPE key<br>返回 key 所储存的值的类型。</p><p>Redis DEL 命令<br>Redis key(键)<br>Redis DEL 命令用于删除已存在的键。不存在的 key 会被忽略。<br>语法<br>redis DEL 命令基本语法如下：<br>redis 127.0.0.1:6379> DEL KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>被删除 key 的数量。<br>实例<br>首先，我们在 redis 中创建一个 key 并设置值。<br>redis 127.0.0.1:6379> SET w3ckey redis<br>OK<br>现在我们删除已创建的 key。<br>redis 127.0.0.1:6379> DEL w3ckey<br>(integer) 1</p></blockquote><p>Redis Dump 命令<br>Redis key(键)<br>Redis DUMP 命令用于序列化给定 key ，并返回被序列化的值。<br>语法<br>redis DUMP 命令基本语法如下：<br>redis 127.0.0.1:6379> DUMP KEY_NAME<br>可用版本</p><blockquote><p>= 2.6.0<br>返回值<br>如果 key 不存在，那么返回 nil 。 否则，返回序列化之后的值。<br>实例<br>首先，我们在 redis 中创建一个 key 并设置值。<br>redis> SET greeting &ldquo;hello, dumping world!&rdquo;<br>OK<br>现在使用 DUMP 序列化键值。<br>redis> DUMP greeting<br>&ldquo;\x00\x15hello, dumping world!\x06\x00E\xa0Z\x82\xd8r\xc1\xde&rdquo;</p></blockquote><p>redis> DUMP not-exists-key<br>(nil)<br>Redis EXISTS 命令<br>Redis key(键)<br>Redis EXISTS 命令用于检查给定 key 是否存在。<br>语法<br>redis EXISTS 命令基本语法如下：<br>redis 127.0.0.1:6379> EXISTS KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>若 key 存在返回 1 ，否则返回 0 。<br>实例<br>redis 127.0.0.1:6379> EXISTS runoob-new-key<br>(integer) 0<br>现在我们创建一个名为 runoob-new-key 的键并赋值，再使用 EXISTS 命令。<br>redis 127.0.0.1:6379> set runoob-new-key newkey<br>OK<br>redis 127.0.0.1:6379> EXISTS runoob-new-key<br>(integer) 1<br>redis 127.0.0.1:6379><br>Redis Expire 命令<br>Redis key(键)<br>Redis Expire 命令用于设置 key 的过期时间，key 过期后将不再可用。单位以秒计。<br>语法<br>redis Expire 命令基本语法如下：<br>redis 127.0.0.1:6379> Expire KEY_NAME TIME_IN_SECONDS<br>可用版本<br>= 1.0.0<br>返回值<br>设置成功返回 1 。 当 key 不存在或者不能为 key 设置过期时间时(比如在低于 2.1.3 版本的 Redis 中你尝试更新 key 的过期时间)返回 0 。<br>实例<br>首先创建一个 key 并赋值：<br>redis 127.0.0.1:6379> SET runooobkey redis<br>OK<br>为 key 设置过期时间：<br>redis 127.0.0.1:6379> EXPIRE runooobkey 60<br>(integer) 1<br>以上实例中我们为键 runooobkey 设置了过期时间为 1 分钟，1分钟后该键会自动删除。<br>Redis Expireat 命令<br>Redis key(键)<br>Redis Expireat 命令用于以 UNIX 时间戳(unix timestamp)格式设置 key 的过期时间。key 过期后将不再可用。<br>语法<br>redis Expireat 命令基本语法如下：<br>redis 127.0.0.1:6379> Expireat KEY_NAME TIME_IN_UNIX_TIMESTAMP<br>可用版本<br>= 1.0.0<br>返回值<br>设置成功返回 1 。 当 key 不存在或者不能为 key 设置过期时间时(比如在低于 2.1.3 版本的 Redis 中你尝试更新 key 的过期时间)返回 0 。<br>实例<br>首先创建一个 key 并赋值：<br>redis 127.0.0.1:6379> SET runoobkey redis<br>OK<br>为 key 设置过期时间：<br>redis 127.0.0.1:6379> EXPIREAT runoobkey 1293840000<br>(integer) 1<br>EXISTS runoobkey<br>(integer) 0<br>Redis Keys 命令<br>Redis key(键)<br>Redis Keys 命令用于查找所有符合给定模式 pattern 的 key 。。<br>语法<br>redis KEYS 命令基本语法如下：<br>redis 127.0.0.1:6379> KEYS PATTERN<br>可用版本<br>= 1.0.0<br>返回值<br>符合给定模式的 key 列表 (Array)。<br>实例<br>首先创建一些 key，并赋上对应值：<br>redis 127.0.0.1:6379> SET runoob1 redis<br>OK<br>redis 127.0.0.1:6379> SET runoob2 mysql<br>OK<br>redis 127.0.0.1:6379> SET runoob3 mongodb<br>OK<br>查找以 runoob 为开头的 key：<br>redis 127.0.0.1:6379> KEYS runoob*</p><ol><li>&ldquo;runoob3&rdquo;</li><li>&ldquo;runoob1&rdquo;</li><li>&ldquo;runoob2&rdquo;<br>获取 redis 中所有的 key 可用使用 *。<br>redis 127.0.0.1:6379> KEYS *</li><li>&ldquo;runoob3&rdquo;</li><li>&ldquo;runoob1&rdquo;</li><li>&ldquo;runoob2&rdquo;<br>Redis PEXPIREAT 命令<br>Redis key(键)<br>Redis PEXPIREAT 命令用于设置 key 的过期时间，以毫秒计。key 过期后将不再可用。<br>语法<br>redis PEXPIREAT 命令基本语法如下：<br>redis 127.0.0.1:6379> PEXPIREAT KEY_NAME TIME_IN_MILLISECONDS_IN_UNIX_TIMESTAMP<br>可用版本<br>= 1.0.0<br>返回值<br>设置成功返回 1 。 当 key 不存在或者不能为 key 设置过期时间时(比如在低于 2.1.3 版本的 Redis 中你尝试更新 key 的过期时间)返回 0 。<br>实例<br>首先创建一个 key 并赋值：<br>redis 127.0.0.1:6379> SET runoobkey redis<br>OK<br>为 key 设置过期时间：<br>redis 127.0.0.1:6379> PEXPIREAT runoobkey 1555555555005<br>(integer) 1<br>Redis Move 命令<br>Redis key(键)<br>Redis MOVE 命令用于将当前数据库的 key 移动到给定的数据库 db 当中。<br>语法<br>redis Move 命令基本语法如下：<br>redis 127.0.0.1:6379> MOVE KEY_NAME DESTINATION_DATABASE<br>可用版本<br>= 1.0.0<br>返回值<br>移动成功返回 1 ，失败则返回 0 。<br>实例</li></ol><h1 class="relative group">key 存在于当前数据库<div id=key class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key aria-label=锚点>#</a></span></h1></blockquote><p>redis> SELECT 0 # redis默认使用数据库 0，为了清晰起见，这里再显式指定一次。<br>OK</p><p>redis> SET song &ldquo;secret base - Zone&rdquo;<br>OK</p><p>redis> MOVE song 1 # 将 song 移动到数据库 1<br>(integer) 1</p><p>redis> EXISTS song # song 已经被移走<br>(integer) 0</p><p>redis> SELECT 1 # 使用数据库 1<br>OK</p><p>redis:1> EXISTS song # 证实 song 被移到了数据库 1 (注意命令提示符变成了"redis:1"，表明正在使用数据库 1)<br>(integer) 1</p><h1 class="relative group">当 key 不存在的时候<div id=key-4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-4 aria-label=锚点>#</a></span></h1><p>redis:1> EXISTS fake_key<br>(integer) 0</p><p>redis:1> MOVE fake_key 0 # 试图从数据库 1 移动一个不存在的 key 到数据库 0，失败<br>(integer) 0</p><p>redis:1> select 0 # 使用数据库0<br>OK</p><p>redis> EXISTS fake_key # 证实 fake_key 不存在<br>(integer) 0</p><h1 class="relative group">当源数据库和目标数据库有相同的 key 时<div id=key-5 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-5 aria-label=锚点>#</a></span></h1><p>redis> SELECT 0 # 使用数据库0<br>OK<br>redis> SET favorite_fruit &ldquo;banana&rdquo;<br>OK</p><p>redis> SELECT 1 # 使用数据库1<br>OK<br>redis:1> SET favorite_fruit &ldquo;apple&rdquo;<br>OK</p><p>redis:1> SELECT 0 # 使用数据库0，并试图将 favorite_fruit 移动到数据库 1<br>OK</p><p>redis> MOVE favorite_fruit 1 # 因为两个数据库有相同的 key，MOVE 失败<br>(integer) 0</p><p>redis> GET favorite_fruit # 数据库 0 的 favorite_fruit 没变<br>&ldquo;banana&rdquo;</p><p>redis> SELECT 1<br>OK</p><p>redis:1> GET favorite_fruit # 数据库 1 的 favorite_fruit 也是<br>&ldquo;apple&rdquo;<br>Redis PERSIST 命令<br>Redis key(键)<br>Redis PERSIST 命令用于移除给定 key 的过期时间，使得 key 永不过期。<br>语法<br>redis PERSIST 命令基本语法如下：<br>redis 127.0.0.1:6379> PERSIST KEY_NAME<br>可用版本</p><blockquote><p>= 2.2.0<br>返回值<br>当过期时间移除成功时，返回 1 。 如果 key 不存在或 key 没有设置过期时间，返回 0 。<br>实例<br>redis> SET mykey &ldquo;Hello&rdquo;<br>OK</p></blockquote><p>redis> EXPIRE mykey 10 # 为 key 设置生存时间<br>(integer) 1</p><p>redis> TTL mykey<br>(integer) 10</p><p>redis> PERSIST mykey # 移除 key 的生存时间<br>(integer) 1</p><p>redis> TTL mykey<br>(integer) -1<br>Redis Pttl 命令<br>Redis key(键)<br>Redis Pttl 命令以毫秒为单位返回 key 的剩余过期时间。<br>语法<br>redis Pttl 命令基本语法如下：<br>redis 127.0.0.1:6379> PTTL KEY_NAME<br>可用版本</p><blockquote><p>= 2.6.0<br>返回值<br>当 key 不存在时，返回 -2 。 当 key 存在但没有设置剩余生存时间时，返回 -1 。 否则，以毫秒为单位，返回 key 的剩余生存时间。<br>注意：在 Redis 2.8 以前，当 key 不存在，或者 key 没有设置剩余生存时间时，命令都返回 -1 。<br>实例</p><h1 class="relative group">不存在的 key<div id=key-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-1 aria-label=锚点>#</a></span></h1></blockquote><p>redis> FLUSHDB<br>OK</p><p>redis> PTTL key<br>(integer) -2</p><h1 class="relative group">key 存在，但没有设置剩余生存时间<div id=key-6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-6 aria-label=锚点>#</a></span></h1><p>redis> SET key value<br>OK</p><p>redis> PTTL key<br>(integer) -1</p><h1 class="relative group">有剩余生存时间的 key<div id=key-7 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-7 aria-label=锚点>#</a></span></h1><p>redis> PEXPIRE key 10086<br>(integer) 1</p><p>redis> PTTL key<br>(integer) 6179<br>Redis TTL 命令<br>Redis key(键)<br>Redis TTL 命令以秒为单位返回 key 的剩余过期时间。<br>语法<br>redis TTL 命令基本语法如下：<br>redis 127.0.0.1:6379> TTL KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>当 key 不存在时，返回 -2 。 当 key 存在但没有设置剩余生存时间时，返回 -1 。 否则，以秒为单位，返回 key 的剩余生存时间。<br>注意：在 Redis 2.8 以前，当 key 不存在，或者 key 没有设置剩余生存时间时，命令都返回 -1 。<br>实例</p><h1 class="relative group">不存在的 key<div id=key-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-2 aria-label=锚点>#</a></span></h1></blockquote><p>redis> FLUSHDB<br>OK</p><p>redis> TTL key<br>(integer) -2</p><h1 class="relative group">key 存在，但没有设置剩余生存时间<div id=key-8 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-8 aria-label=锚点>#</a></span></h1><p>redis> SET key value<br>OK</p><p>redis> TTL key<br>(integer) -1</p><h1 class="relative group">有剩余生存时间的 key<div id=key-9 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-9 aria-label=锚点>#</a></span></h1><p>redis> EXPIRE key 10086<br>(integer) 1</p><p>redis> TTL key<br>(integer) 10084<br>Redis RANDOMKEY 命令<br>Redis key(键)<br>Redis RANDOMKEY 命令从当前数据库中随机返回一个 key 。<br>语法<br>redis RANDOMKEY 命令基本语法如下：<br>redis 127.0.0.1:6379> RANDOMKEY<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>当数据库不为空时，返回一个 key 。 当数据库为空时，返回 nil （windows 系统返回 null）。<br>实例</p><h1 class="relative group">数据库不为空<div class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=# aria-label=锚点>#</a></span></h1></blockquote><p>redis> MSET fruit &ldquo;apple&rdquo; drink &ldquo;beer&rdquo; food &ldquo;cookies&rdquo; # 设置多个 key<br>OK</p><p>redis> RANDOMKEY<br>&ldquo;fruit&rdquo;</p><p>redis> RANDOMKEY<br>&ldquo;food&rdquo;</p><p>redis> KEYS * # 查看数据库内所有key，证明 RANDOMKEY 并不删除 key</p><ol><li>&ldquo;food&rdquo;</li><li>&ldquo;drink&rdquo;</li><li>&ldquo;fruit&rdquo;</li></ol><h1 class="relative group">数据库为空<div id=-5 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-5 aria-label=锚点>#</a></span></h1><p>redis> FLUSHDB # 删除当前数据库所有 key<br>OK</p><p>redis> RANDOMKEY<br>Redis Rename 命令<br>Redis key(键)<br>Redis Rename 命令用于修改 key 的名称 。<br>语法<br>redis Rename 命令基本语法如下：<br>redis 127.0.0.1:6379> RENAME OLD_KEY_NAME NEW_KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>改名成功时提示 OK ，失败时候返回一个错误。<br>当 OLD_KEY_NAME 和 NEW_KEY_NAME 相同，或者 OLD_KEY_NAME 不存在时，返回一个错误。 当 NEW_KEY_NAME 已经存在时， RENAME 命令将覆盖旧值。<br>实例</p><h1 class="relative group">key 存在且 newkey 不存在<div id=keynewkey class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keynewkey aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET message &ldquo;hello world&rdquo;<br>OK</p><p>redis> RENAME message greeting<br>OK</p><p>redis> EXISTS message # message 不复存在<br>(integer) 0</p><p>redis> EXISTS greeting # greeting 取而代之<br>(integer) 1</p><h1 class="relative group">当 key 不存在时，返回错误<div id=key-10 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-10 aria-label=锚点>#</a></span></h1><p>redis> RENAME fake_key never_exists<br>(error) ERR no such key</p><h1 class="relative group">newkey 已存在时， RENAME 会覆盖旧 newkey<div id=newkeyrenamenewkey class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#newkeyrenamenewkey aria-label=锚点>#</a></span></h1><p>redis> SET pc &ldquo;lenovo&rdquo;<br>OK</p><p>redis> SET personal_computer &ldquo;dell&rdquo;<br>OK</p><p>redis> RENAME pc personal_computer<br>OK</p><p>redis> GET pc<br>(nil)</p><p>redis:1> GET personal_computer # 原来的值 dell 被覆盖了<br>&ldquo;lenovo&rdquo;<br>Redis Renamenx 命令<br>Redis key(键)<br>Redis Renamenx 命令用于在新的 key 不存在时修改 key 的名称 。<br>语法<br>redis Renamenx 命令基本语法如下：<br>redis 127.0.0.1:6379> RENAMENX OLD_KEY_NAME NEW_KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>修改成功时，返回 1 。 如果 NEW_KEY_NAME 已经存在，返回 0 。<br>实例</p><h1 class="relative group">newkey 不存在，改名成功<div id=newkey class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#newkey aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET player &ldquo;MPlyaer&rdquo;<br>OK</p><p>redis> EXISTS best_player<br>(integer) 0</p><p>redis> RENAMENX player best_player<br>(integer) 1</p><h1 class="relative group">newkey存在时，失败<div id=newkey-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#newkey-1 aria-label=锚点>#</a></span></h1><p>redis> SET animal &ldquo;bear&rdquo;<br>OK</p><p>redis> SET favorite_animal &ldquo;butterfly&rdquo;<br>OK</p><p>redis> RENAMENX animal favorite_animal<br>(integer) 0</p><p>redis> get animal<br>&ldquo;bear&rdquo;</p><p>redis> get favorite_animal<br>&ldquo;butterfly&rdquo;<br>Redis Type 命令<br>Redis key(键)<br>Redis Type 命令用于返回 key 所储存的值的类型。<br>语法<br>redis Renamenx 命令基本语法如下：<br>redis 127.0.0.1:6379> TYPE KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>返回 key 的数据类型，数据类型有：<br>none (key不存在)<br>string (字符串)<br>list (列表)<br>set (集合)<br>zset (有序集)<br>hash (哈希表)<br>实例</p><h1 class="relative group">字符串<div id=-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-1 aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET weather &ldquo;sunny&rdquo;<br>OK</p><p>redis> TYPE weather<br>string</p><h1 class="relative group">列表<div id=-6 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-6 aria-label=锚点>#</a></span></h1><p>redis> LPUSH book_list &ldquo;programming in scala&rdquo;<br>(integer) 1</p><p>redis> TYPE book_list<br>list</p><h1 class="relative group">集合<div id=-7 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-7 aria-label=锚点>#</a></span></h1><p>redis> SADD pat &ldquo;dog&rdquo;<br>(integer) 1</p><p>redis> TYPE pat<br>set<br>Redis 字符串(String)<br>Redis 字符串数据类型的相关命令用于管理 redis 字符串值，基本语法如下：<br>语法<br>redis 127.0.0.1:6379> COMMAND KEY_NAME<br>实例<br>redis 127.0.0.1:6379> SET runoobkey redis<br>OK<br>redis 127.0.0.1:6379> GET runoobkey<br>&ldquo;redis&rdquo;<br>在以上实例中我们使用了 SET 和 GET 命令，键为 runoobkey。</p><p>Redis 字符串命令<br>下表列出了常用的 redis 字符串命令：<br>序号 命令及描述<br>1 SET key value<br>设置指定 key 的值<br>2 GET key<br>获取指定 key 的值。<br>3 GETRANGE key start end<br>返回 key 中字符串值的子字符<br>4 GETSET key value<br>将给定 key 的值设为 value ，并返回 key 的旧值(old value)。<br>5 GETBIT key offset<br>对 key 所储存的字符串值，获取指定偏移量上的位(bit)。<br>6 MGET key1 [key2..]<br>获取所有(一个或多个)给定 key 的值。<br>7 SETBIT key offset value<br>对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。<br>8 SETEX key seconds value<br>将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)。<br>9 SETNX key value<br>只有在 key 不存在时设置 key 的值。<br>10 SETRANGE key offset value<br>用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始。<br>11 STRLEN key<br>返回 key 所储存的字符串值的长度。<br>12 MSET key value [key value …]<br>同时设置一个或多个 key-value 对。<br>13 MSETNX key value [key value …]<br>同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。<br>14 PSETEX key milliseconds value<br>这个命令和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间，而不是像 SETEX 命令那样，以秒为单位。<br>15 INCR key<br>将 key 中储存的数字值增一。<br>16 INCRBY key increment<br>将 key 所储存的值加上给定的增量值（increment） 。<br>17 INCRBYFLOAT key increment<br>将 key 所储存的值加上给定的浮点增量值（increment） 。<br>18 DECR key<br>将 key 中储存的数字值减一。<br>19 DECRBY key decrement<br>key 所储存的值减去给定的减量值（decrement） 。<br>20 APPEND key value<br>如果 key 已经存在并且是一个字符串， APPEND 命令将指定的 value 追加到该 key 原来值（value）的末尾。<br>edis SET 命令<br>Redis 字符串(string)<br>Redis SET 命令用于设置给定 key 的值。如果 key 已经存储其他值， SET 就覆写旧值，且无视类型。<br>语法<br>redis SET 命令基本语法如下：<br>redis 127.0.0.1:6379> SET KEY_NAME VALUE<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>在 Redis 2.6.12 以前版本， SET 命令总是返回 OK 。<br>从 Redis 2.6.12 版本开始， SET 在设置操作成功完成时，才返回 OK 。<br>实例<br>首先，我们在 redis 中创建一个 key 并设置值。</p><h1 class="relative group">对不存在的键进行设置<div id=-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-2 aria-label=锚点>#</a></span></h1></blockquote><p>redis 127.0.0.1:6379> SET key &ldquo;value&rdquo;<br>OK</p><p>redis 127.0.0.1:6379> GET key<br>&ldquo;value&rdquo;</p><h1 class="relative group">对已存在的键进行设置<div id=-8 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-8 aria-label=锚点>#</a></span></h1><p>redis 127.0.0.1:6379> SET key &ldquo;new-value&rdquo;<br>OK</p><p>redis 127.0.0.1:6379> GET key<br>&ldquo;new-value&rdquo;<br>Redis Get 命令<br>Redis 字符串(string)<br>Redis Get 命令用于获取指定 key 的值。如果 key 不存在，返回 nil 。如果key 储存的值不是字符串类型，返回一个错误。<br>语法<br>redis Get 命令基本语法如下：<br>redis 127.0.0.1:6379> GET KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>返回 key 的值，如果 key 不存在时，返回 nil。 如果 key 不是字符串类型，那么返回一个错误。<br>实例</p><h1 class="relative group">对不存在的 key 或字符串类型 key 进行 GET<div id=keykeyget class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keykeyget aria-label=锚点>#</a></span></h1></blockquote><p>redis> GET db<br>(nil)</p><p>redis> SET db redis<br>OK</p><p>redis> GET db<br>&ldquo;redis&rdquo;</p><h1 class="relative group">对不是字符串类型的 key 进行 GET<div id=keyget class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keyget aria-label=锚点>#</a></span></h1><p>redis> DEL db<br>(integer) 1</p><p>redis> LPUSH db redis mongodb mysql<br>(integer) 3</p><p>redis> GET db<br>(error) ERR Operation against a key holding the wrong kind of value<br>Redis Getrange 命令<br>Redis 字符串(string)<br>Redis Getrange 命令用于获取存储在指定 key 中字符串的子字符串。字符串的截取范围由 start 和 end 两个偏移量决定(包括 start 和 end 在内)。<br>语法<br>redis Getrange 命令基本语法如下：<br>redis 127.0.0.1:6379> GETRANGE KEY_NAME start end<br>可用版本</p><blockquote><p>= 2.4.0<br>返回值<br>截取得到的子字符串。<br>实例<br>首先，设置 mykey 的值并截取字符串。<br>redis 127.0.0.1:6379> SET mykey &ldquo;This is my test key&rdquo;<br>OK<br>redis 127.0.0.1:6379> GETRANGE mykey 0 3<br>&ldquo;This&rdquo;<br>redis 127.0.0.1:6379> GETRANGE mykey 0 -1<br>&ldquo;This is my test key&rdquo;<br>Redis Getset 命令<br>Redis 字符串(string)<br>Redis Getset 命令用于设置指定 key 的值，并返回 key 的旧值。<br>语法<br>redis Getset 命令基本语法如下：<br>redis 127.0.0.1:6379> GETSET KEY_NAME VALUE<br>可用版本<br>= 1.0.0<br>返回值<br>返回给定 key 的旧值。 当 key 没有旧值时，即 key 不存在时，返回 nil 。<br>当 key 存在但不是字符串类型时，返回一个错误。<br>实例<br>首先，设置 mykey 的值并截取字符串。<br>redis> GETSET db mongodb # 没有旧值，返回 nil<br>(nil)</p></blockquote><p>redis> GET db<br>&ldquo;mongodb&rdquo;</p><p>redis> GETSET db redis # 返回旧值 mongodb<br>&ldquo;mongodb&rdquo;</p><p>redis> GET db<br>&ldquo;redis&rdquo;<br>Redis Getbit 命令<br>Redis 字符串(string)<br>Redis Getbit 命令用于对 key 所储存的字符串值，获取指定偏移量上的位(bit)。<br>语法<br>redis Getbit 命令基本语法如下：<br>redis 127.0.0.1:6379> GETBIT KEY_NAME OFFSET<br>可用版本</p><blockquote><p>= 2.2.0<br>返回值<br>字符串值指定偏移量上的位(bit)。<br>当偏移量 OFFSET 比字符串值的长度大，或者 key 不存在时，返回 0 。<br>实例</p><h1 class="relative group">对不存在的 key 或者不存在的 offset 进行 GETBIT， 返回 0<div id=keyoffsetgetbit0 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keyoffsetgetbit0 aria-label=锚点>#</a></span></h1></blockquote><p>redis> EXISTS bit<br>(integer) 0</p><p>redis> GETBIT bit 10086<br>(integer) 0</p><h1 class="relative group">对已存在的 offset 进行 GETBIT<div id=offsetgetbit class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#offsetgetbit aria-label=锚点>#</a></span></h1><p>redis> SETBIT bit 10086 1<br>(integer) 0</p><p>redis> GETBIT bit 10086<br>(integer) 1<br>Redis Mget 命令<br>Redis 字符串(string)<br>Redis Mget 命令返回所有(一个或多个)给定 key 的值。 如果给定的 key 里面，有某个 key 不存在，那么这个 key 返回特殊值 nil 。<br>语法<br>redis Mget 命令基本语法如下：<br>redis 127.0.0.1:6379> MGET KEY1 KEY2 .. KEYN<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>一个包含所有给定 key 的值的列表。<br>实例<br>redis 127.0.0.1:6379> SET key1 &ldquo;hello&rdquo;<br>OK<br>redis 127.0.0.1:6379> SET key2 &ldquo;world&rdquo;<br>OK<br>redis 127.0.0.1:6379> MGET key1 key2 someOtherKey</p><ol><li>&ldquo;Hello&rdquo;</li><li>&ldquo;World&rdquo;</li><li>(nil)<br>Redis Setbit 命令<br>Redis 字符串(string)<br>Redis Setbit 命令用于对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。<br>语法<br>redis Setbit 命令基本语法如下：<br>redis 127.0.0.1:6379> Setbit KEY_NAME OFFSET<br>可用版本<br>= 2.2.0<br>返回值<br>指定偏移量原来储存的位。<br>实例<br>redis> SETBIT bit 10086 1<br>(integer) 0</li></ol></blockquote><p>redis> GETBIT bit 10086<br>(integer) 1</p><p>redis> GETBIT bit 100 # bit 默认被初始化为 0<br>(integer) 0<br>Redis Setex 命令<br>Redis 字符串(string)<br>Redis Setex 命令为指定的 key 设置值及其过期时间。如果 key 已经存在， SETEX 命令将会替换旧的值。<br>语法<br>redis Setex 命令基本语法如下：<br>redis 127.0.0.1:6379> SETEX KEY_NAME TIMEOUT VALUE<br>可用版本</p><blockquote><p>= 2.0.0<br>返回值<br>设置成功时返回 OK 。<br>实例<br>redis 127.0.0.1:6379> SETEX mykey 60 redis<br>OK<br>redis 127.0.0.1:6379> TTL mykey<br>60<br>redis 127.0.0.1:6379> GET mykey<br>&ldquo;redis<br>Redis Setnx 命令<br>Redis 字符串(string)<br>Redis Setnx（SET if Not eXists） 命令在指定的 key 不存在时，为 key 设置指定的值。<br>语法<br>redis Setnx 命令基本语法如下：<br>redis 127.0.0.1:6379> SETNX KEY_NAME VALUE<br>可用版本<br>= 1.0.0<br>返回值<br>设置成功，返回 1 。 设置失败，返回 0 。<br>实例<br>redis> EXISTS job # job 不存在<br>(integer) 0</p></blockquote><p>redis> SETNX job &ldquo;programmer&rdquo; # job 设置成功<br>(integer) 1</p><p>redis> SETNX job &ldquo;code-farmer&rdquo; # 尝试覆盖 job ，失败<br>(integer) 0</p><p>redis> GET job # 没有被覆盖<br>&ldquo;programmer&rdquo;<br>Redis Setrange 命令<br>Redis 字符串(string)<br>Redis Setrange 命令用指定的字符串覆盖给定 key 所储存的字符串值，覆盖的位置从偏移量 offset 开始。<br>语法<br>redis Setrange 命令基本语法如下：<br>redis 127.0.0.1:6379> SETRANGE KEY_NAME OFFSET VALUE<br>可用版本</p><blockquote><p>= 2.2.0<br>返回值<br>被修改后的字符串长度。<br>实例<br>redis 127.0.0.1:6379> SET key1 &ldquo;Hello World&rdquo;<br>OK<br>redis 127.0.0.1:6379> SETRANGE key1 6 &ldquo;Redis&rdquo;<br>(integer) 11<br>redis 127.0.0.1:6379> GET key1<br>&ldquo;Hello Redis&rdquo;<br>Redis Strlen 命令<br>Redis 字符串(string)<br>Redis Strlen 命令用于获取指定 key 所储存的字符串值的长度。当 key 储存的不是字符串值时，返回一个错误。<br>语法<br>redis Strlen 命令基本语法如下：<br>redis 127.0.0.1:6379> STRLEN KEY_NAME<br>可用版本<br>= 2.2.0<br>返回值<br>字符串值的长度。 当 key 不存在时，返回 0。<br>实例</p><h1 class="relative group">获取字符串的长度<div id=-3 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-3 aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET mykey &ldquo;Hello world&rdquo;<br>OK</p><p>redis> STRLEN mykey<br>(integer) 11</p><h1 class="relative group">不存在的 key 长度为 0<div id=key0 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key0 aria-label=锚点>#</a></span></h1><p>redis> STRLEN nonexisting<br>(integer) 0<br>Redis Mset 命令<br>Redis 字符串(string)<br>Redis Mset 命令用于同时设置一个或多个 key-value 对。<br>语法<br>redis Mset 命令基本语法如下：<br>redis 127.0.0.1:6379> MSET key1 value1 key2 value2 .. keyN valueN<br>可用版本</p><blockquote><p>= 1.0.1<br>返回值<br>总是返回 OK 。<br>实例<br>redis 127.0.0.1:6379> MSET key1 &ldquo;Hello&rdquo; key2 &ldquo;World&rdquo;<br>OK<br>redis 127.0.0.1:6379> GET key1<br>&ldquo;Hello&rdquo;<br>redis 127.0.0.1:6379> GET key2</p><ol><li>&ldquo;World&rdquo;<br>Redis Msetnx 命令<br>Redis 字符串(string)<br>Redis Msetnx 命令用于所有给定 key 都不存在时，同时设置一个或多个 key-value 对。<br>语法<br>redis Msetnx 命令基本语法如下：<br>redis 127.0.0.1:6379> MSETNX key1 value1 key2 value2 .. keyN valueN<br>可用版本<br>= 1.0.1<br>返回值<br>当所有 key 都成功设置，返回 1 。 如果所有给定 key 都设置失败(至少有一个 key 已经存在)，那么返回 0 。<br>实例</li></ol><h1 class="relative group">对不存在的 key 进行 MSETNX<div id=keymsetnx class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keymsetnx aria-label=锚点>#</a></span></h1></blockquote><p>redis> MSETNX rmdbs &ldquo;MySQL&rdquo; nosql &ldquo;MongoDB&rdquo; key-value-store &ldquo;redis&rdquo;<br>(integer) 1</p><p>redis> MGET rmdbs nosql key-value-store</p><ol><li>&ldquo;MySQL&rdquo;</li><li>&ldquo;MongoDB&rdquo;</li><li>&ldquo;redis&rdquo;</li></ol><h1 class="relative group">MSET 的给定 key 当中有已存在的 key<div id=msetkeykey class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#msetkeykey aria-label=锚点>#</a></span></h1><p>redis> MSETNX rmdbs &ldquo;Sqlite&rdquo; language &ldquo;python&rdquo; # rmdbs 键已经存在，操作失败<br>(integer) 0</p><p>redis> EXISTS language # 因为 MSET 是原子性操作，language 没有被设置<br>(integer) 0</p><p>redis> GET rmdbs # rmdbs 也没有被修改<br>&ldquo;MySQL&rdquo;<br>Redis Psetex 命令<br>Redis 字符串(string)<br>Redis Psetex 命令以毫秒为单位设置 key 的生存时间。<br>语法<br>redis Psetex 命令基本语法如下：<br>redis 127.0.0.1:6379> PSETEX key1 EXPIRY_IN_MILLISECONDS value1<br>可用版本</p><blockquote><p>= 2.6.0<br>返回值<br>设置成功时返回 OK 。<br>实例<br>redis 127.0.0.1:6379> PSETEX mykey 1000 &ldquo;Hello&rdquo;<br>OK<br>redis 127.0.0.1:6379> PTTL mykey<br>999<br>redis 127.0.0.1:6379> GET mykey</p><ol><li>&ldquo;Hello&rdquo;<br>Redis Incr 命令<br>Redis 字符串(string)<br>Redis Incr 命令将 key 中储存的数字值增一。<br>如果 key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 INCR 操作。<br>如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。<br>本操作的值限制在 64 位(bit)有符号数字表示之内。<br>语法<br>redis Incr 命令基本语法如下：<br>redis 127.0.0.1:6379> INCR KEY_NAME<br>可用版本<br>= 1.0.0<br>返回值<br>执行 INCR 命令之后 key 的值。<br>实例<br>redis> SET page_view 20<br>OK</li></ol></blockquote><p>redis> INCR page_view<br>(integer) 21</p><p>redis> GET page_view # 数字值在 Redis 中以字符串的形式保存<br>&ldquo;21&rdquo;<br>Redis Incrby 命令<br>Redis 字符串(string)<br>Redis Incrby 命令将 key 中储存的数字加上指定的增量值。<br>如果 key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 INCRBY 命令。<br>如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。<br>本操作的值限制在 64 位(bit)有符号数字表示之内。<br>语法<br>redis Incrby 命令基本语法如下：<br>redis 127.0.0.1:6379> INCRBY KEY_NAME INCR_AMOUNT<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>加上指定的增量值之后， key 的值。<br>实例</p><h1 class="relative group">key 存在且是数字值<div id=key-3 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-3 aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET rank 50<br>OK</p><p>redis> INCRBY rank 20<br>(integer) 70</p><p>redis> GET rank<br>&ldquo;70&rdquo;</p><h1 class="relative group">key 不存在时<div id=key-11 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-11 aria-label=锚点>#</a></span></h1><p>redis> EXISTS counter<br>(integer) 0</p><p>redis> INCRBY counter 30<br>(integer) 30</p><p>redis> GET counter<br>&ldquo;30&rdquo;</p><h1 class="relative group">key 不是数字值时<div id=key-12 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#key-12 aria-label=锚点>#</a></span></h1><p>redis> SET book &ldquo;long long ago…&rdquo;<br>OK</p><p>redis> INCRBY book 200<br>(error) ERR value is not an integer or out of range<br>Redis Incrbyfloat 命令<br>Redis 字符串(string)<br>Redis Incrbyfloat 命令为 key 中所储存的值加上指定的浮点数增量值。<br>如果 key 不存在，那么 INCRBYFLOAT 会先将 key 的值设为 0 ，再执行加法操作。<br>语法<br>redis Incrbyfloat 命令基本语法如下：<br>redis 127.0.0.1:6379> INCRBYFLOAT KEY_NAME INCR_AMOUNT<br>可用版本</p><blockquote><p>= 2.6.0<br>返回值<br>执行命令之后 key 的值。<br>实例</p><h1 class="relative group">值和增量都不是指数符号<div id=-4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-4 aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET mykey 10.50<br>OK</p><p>redis> INCRBYFLOAT mykey 0.1<br>&ldquo;10.6&rdquo;</p><h1 class="relative group">值和增量都是指数符号<div id=-9 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-9 aria-label=锚点>#</a></span></h1><p>redis> SET mykey 314e-2<br>OK</p><p>redis> GET mykey # 用 SET 设置的值可以是指数符号<br>&ldquo;314e-2&rdquo;</p><p>redis> INCRBYFLOAT mykey 0 # 但执行 INCRBYFLOAT 之后格式会被改成非指数符号<br>&ldquo;3.14&rdquo;</p><h1 class="relative group">可以对整数类型执行<div id=-10 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-10 aria-label=锚点>#</a></span></h1><p>redis> SET mykey 3<br>OK</p><p>redis> INCRBYFLOAT mykey 1.1<br>&ldquo;4.1&rdquo;</p><h1 class="relative group">后跟的 0 会被移除<div id=0 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#0 aria-label=锚点>#</a></span></h1><p>redis> SET mykey 3.0<br>OK</p><p>redis> GET mykey # SET 设置的值小数部分可以是 0<br>&ldquo;3.0&rdquo;</p><p>redis> INCRBYFLOAT mykey 1.000000000000000000000 # 但 INCRBYFLOAT 会将无用的 0 忽略掉，有需要的话，将浮点变为整数<br>&ldquo;4&rdquo;</p><p>redis> GET mykey<br>&ldquo;4&rdquo;<br>Redis Decr 命令<br>Redis 字符串(string)<br>Redis Decr 命令将 key 中储存的数字值减一。<br>如果 key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 DECR 操作。<br>如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。<br>本操作的值限制在 64 位(bit)有符号数字表示之内。<br>语法<br>redis Decr 命令基本语法如下：<br>redis 127.0.0.1:6379> DECR KEY_NAME<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>执行命令之后 key 的值。<br>实例</p><h1 class="relative group">对存在的数字值 key 进行 DECR<div id=keydecr class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keydecr aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET failure_times 10<br>OK</p><p>redis> DECR failure_times<br>(integer) 9</p><h1 class="relative group">对不存在的 key 值进行 DECR<div id=keydecr-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keydecr-1 aria-label=锚点>#</a></span></h1><p>redis> EXISTS count<br>(integer) 0</p><p>redis> DECR count<br>(integer) -1</p><h1 class="relative group">对存在但不是数值的 key 进行 DECR<div id=keydecr-2 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keydecr-2 aria-label=锚点>#</a></span></h1><p>redis> SET company YOUR_CODE_SUCKS.LLC<br>OK</p><p>redis> DECR company<br>(error) ERR value is not an integer or out of range<br>Redis Decrby 命令<br>Redis 字符串(string)<br>Redis Decrby 命令将 key 所储存的值减去指定的减量值。<br>如果 key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 DECRBY 操作。<br>如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。<br>本操作的值限制在 64 位(bit)有符号数字表示之内。<br>语法<br>redis Decrby 命令基本语法如下：<br>redis 127.0.0.1:6379> DECRBY KEY_NAME DECREMENT_AMOUNT<br>可用版本</p><blockquote><p>= 1.0.0<br>返回值<br>减去指定减量值之后， key 的值。<br>实例</p><h1 class="relative group">对已存在的 key 进行 DECRBY<div id=keydecrby class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keydecrby aria-label=锚点>#</a></span></h1></blockquote><p>redis> SET count 100<br>OK</p><p>redis> DECRBY count 20<br>(integer) 80</p><h1 class="relative group">对不存在的 key 进行DECRBY<div id=keydecrby-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keydecrby-1 aria-label=锚点>#</a></span></h1><p>redis> EXISTS pages<br>(integer) 0</p><p>redis> DECRBY pages 10<br>(integer) -10<br>Redis Append 命令<br>Redis 字符串(string)<br>Redis Append 命令用于为指定的 key 追加值。<br>如果 key 已经存在并且是一个字符串， APPEND 命令将 value 追加到 key 原来的值的末尾。<br>如果 key 不存在， APPEND 就简单地将给定 key 设为 value ，就像执行 SET key value 一样。<br>语法<br>redis Append 命令基本语法如下：<br>redis 127.0.0.1:6379> APPEND KEY_NAME NEW_VALUE<br>可用版本</p><blockquote><p>= 2.0.0<br>返回值<br>追加指定值之后， key 中字符串的长度。<br>实例</p><h1 class="relative group">对不存在的 key 执行 APPEND<div id=keyappend class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keyappend aria-label=锚点>#</a></span></h1></blockquote><p>redis> EXISTS myphone # 确保 myphone 不存在<br>(integer) 0</p><p>redis> APPEND myphone &ldquo;nokia&rdquo; # 对不存在的 key 进行 APPEND ，等同于 SET myphone &ldquo;nokia&rdquo;<br>(integer) 5 # 字符长度</p><h1 class="relative group">对已存在的字符串进行 APPEND<div id=append class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#append aria-label=锚点>#</a></span></h1><p>redis> APPEND myphone " - 1110&rdquo; # 长度从 5 个字符增加到 12 个字符<br>(integer) 12</p><p>redis> GET myphone<br>&ldquo;nokia - 1110&rdquo;<br>Redis 哈希(Hash)<br>Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象。<br>Redis 中每个 hash 可以存储 232 - 1 键值对（40多亿）。<br>实例<br>127.0.0.1:6379> HMSET runoobkey name &ldquo;redis tutorial&rdquo; description &ldquo;redis basic commands for caching&rdquo; likes 20 visitors 23000<br>OK<br>127.0.0.1:6379> HGETALL runoobkey</p><ol><li>&ldquo;name&rdquo;</li><li>&ldquo;redis tutorial&rdquo;</li><li>&ldquo;description&rdquo;</li><li>&ldquo;redis basic commands for caching&rdquo;</li><li>&ldquo;likes&rdquo;</li><li>&ldquo;20&rdquo;</li><li>&ldquo;visitors&rdquo;</li><li>&ldquo;23000&rdquo;<br>在以上实例中，我们设置了 redis 的一些描述信息(name, description, likes, visitors) 到哈希表的 runoobkey 中。</li></ol><p>Redis hash 命令<br>下表列出了 redis hash 基本的相关命令：<br>序号 命令及描述<br>1 HDEL key field1 [field2]<br>删除一个或多个哈希表字段<br>2 HEXISTS key field<br>查看哈希表 key 中，指定的字段是否存在。<br>3 HGET key field<br>获取存储在哈希表中指定字段的值。<br>4 HGETALL key<br>获取在哈希表中指定 key 的所有字段和值<br>5 HINCRBY key field increment<br>为哈希表 key 中的指定字段的整数值加上增量 increment 。<br>6 HINCRBYFLOAT key field increment<br>为哈希表 key 中的指定字段的浮点数值加上增量 increment 。<br>7 HKEYS key<br>获取所有哈希表中的字段<br>8 HLEN key<br>获取哈希表中字段的数量<br>9 HMGET key field1 [field2]<br>获取所有给定字段的值<br>10 HMSET key field1 value1 [field2 value2 ]<br>同时将多个 field-value (域-值)对设置到哈希表 key 中。<br>11 HSET key field value<br>将哈希表 key 中的字段 field 的值设为 value 。<br>12 HSETNX key field value<br>只有在字段 field 不存在时，设置哈希表字段的值。<br>13 HVALS key<br>获取哈希表中所有值<br>14 HSCAN key cursor [MATCH pattern] [COUNT count]<br>迭代哈希表中的键值对。<br>Redis Hdel 命令<br>Redis 哈希(Hash)<br>Redis Hdel 命令用于删除哈希表 key 中的一个或多个指定字段，不存在的字段将被忽略。<br>语法<br>redis Hdel 命令基本语法如下：<br>redis 127.0.0.1:6379> HDEL KEY_NAME FIELD1.. FIELDN<br>可用版本</p><blockquote><p>= 2.0.0<br>返回值<br>被成功删除字段的数量，不包括被忽略的字段。<br>实例<br>redis 127.0.0.1:6379> HSET myhash field1 &ldquo;foo&rdquo;<br>(integer) 1<br>redis 127.0.0.1:6379> HDEL myhash field1<br>(integer) 1<br>redis 127.0.0.1:6379> HDEL myhash field2<br>(integer) 0<br>Redis Hexists 命令<br>Redis 哈希(Hash)<br>Redis Hexists 命令用于查看哈希表的指定字段是否存在。<br>语法<br>redis Hexists 命令基本语法如下：<br>redis 127.0.0.1:6379> HEXISTS KEY_NAME FIELD_NAME<br>可用版本<br>= 2.0.0<br>返回值<br>如果哈希表含有给定字段，返回 1 。 如果哈希表不含有给定字段，或 key 不存在，返回 0 。<br>实例<br>redis 127.0.0.1:6379> HSET myhash field1 &ldquo;foo&rdquo;<br>(integer) 1<br>redis 127.0.0.1:6379> HEXISTS myhash field1<br>(integer) 1<br>redis 127.0.0.1:6379> HEXISTS myhash field2<br>(integer) 0<br>Redis 列表(List)<br>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）<br>一个列表最多可以包含 232 - 1 个元素 (4294967295, 每个列表超过40亿个元素)。<br>实例<br>redis 127.0.0.1:6379> LPUSH runoobkey redis<br>(integer) 1<br>redis 127.0.0.1:6379> LPUSH runoobkey mongodb<br>(integer) 2<br>redis 127.0.0.1:6379> LPUSH runoobkey mysql<br>(integer) 3<br>redis 127.0.0.1:6379> LRANGE runoobkey 0 10</p></blockquote><ol><li><p>&ldquo;mysql&rdquo;</p></li><li><p>&ldquo;mongodb&rdquo;</p></li><li><p>&ldquo;redis&rdquo;<br>在以上实例中我们使用了 LPUSH 将三个值插入了名为 runoobkey 的列表当中。<br>Redis 列表命令<br>下表列出了列表相关的基本命令：<br>序号 命令及描述<br>1 BLPOP key1 [key2 ] timeout<br>移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。<br>2 BRPOP key1 [key2 ] timeout<br>移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。<br>3 BRPOPLPUSH source destination timeout<br>从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它； 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。<br>4 LINDEX key index<br>通过索引获取列表中的元素<br>5 LINSERT key BEFORE|AFTER pivot value<br>在列表的元素前或者后插入元素<br>6 LLEN key<br>获取列表长度<br>7 LPOP key<br>移出并获取列表的第一个元素<br>8 LPUSH key value1 [value2]<br>将一个或多个值插入到列表头部<br>9 LPUSHX key value<br>将一个值插入到已存在的列表头部<br>10 LRANGE key start stop<br>获取列表指定范围内的元素<br>11 LREM key count value<br>移除列表元素<br>12 LSET key index value<br>通过索引设置列表元素的值<br>13 LTRIM key start stop<br>对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。<br>14 RPOP key<br>移除列表的最后一个元素，返回值为移除的元素。<br>15 RPOPLPUSH source destination<br>移除列表的最后一个元素，并将该元素添加到另一个列表并返回<br>16 RPUSH key value1 [value2]<br>在列表中添加一个或多个值<br>17 RPUSHX key value<br>为已存在的列表添加值<br>Redis 集合(Set)<br>Redis 的 Set 是 String 类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。<br>Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。<br>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。<br>实例<br>redis 127.0.0.1:6379> SADD runoobkey redis<br>(integer) 1<br>redis 127.0.0.1:6379> SADD runoobkey mongodb<br>(integer) 1<br>redis 127.0.0.1:6379> SADD runoobkey mysql<br>(integer) 1<br>redis 127.0.0.1:6379> SADD runoobkey mysql<br>(integer) 0<br>redis 127.0.0.1:6379> SMEMBERS runoobkey</p></li><li><p>&ldquo;mysql&rdquo;</p></li><li><p>&ldquo;mongodb&rdquo;</p></li><li><p>&ldquo;redis&rdquo;<br>在以上实例中我们通过 SADD 命令向名为 runoobkey 的集合插入的三个元素。</p></li></ol><p>Redis 集合命令<br>下表列出了 Redis 集合基本命令：<br>序号 命令及描述<br>1 SADD key member1 [member2]<br>向集合添加一个或多个成员<br>2 SCARD key<br>获取集合的成员数<br>3 SDIFF key1 [key2]<br>返回给定所有集合的差集<br>4 SDIFFSTORE destination key1 [key2]<br>返回给定所有集合的差集并存储在 destination 中<br>5 SINTER key1 [key2]<br>返回给定所有集合的交集<br>6 SINTERSTORE destination key1 [key2]<br>返回给定所有集合的交集并存储在 destination 中<br>7 SISMEMBER key member<br>判断 member 元素是否是集合 key 的成员<br>8 SMEMBERS key<br>返回集合中的所有成员<br>9 SMOVE source destination member<br>将 member 元素从 source 集合移动到 destination 集合<br>10 SPOP key<br>移除并返回集合中的一个随机元素<br>11 SRANDMEMBER key [count]<br>返回集合中一个或多个随机数<br>12 SREM key member1 [member2]<br>移除集合中一个或多个成员<br>13 SUNION key1 [key2]<br>返回所有给定集合的并集<br>14 SUNIONSTORE destination key1 [key2]<br>所有给定集合的并集存储在 destination 集合中<br>15 SSCAN key cursor [MATCH pattern] [COUNT count]<br>迭代集合中的元素<br>Redis 有序集合(sorted set)<br>Redis 有序集合和集合一样也是string类型元素的集合,且不允许重复的成员。<br>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。<br>有序集合的成员是唯一的,但分数(score)却可以重复。<br>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。 集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。<br>实例<br>redis 127.0.0.1:6379> ZADD runoobkey 1 redis<br>(integer) 1<br>redis 127.0.0.1:6379> ZADD runoobkey 2 mongodb<br>(integer) 1<br>redis 127.0.0.1:6379> ZADD runoobkey 3 mysql<br>(integer) 1<br>redis 127.0.0.1:6379> ZADD runoobkey 3 mysql<br>(integer) 0<br>redis 127.0.0.1:6379> ZADD runoobkey 4 mysql<br>(integer) 0<br>redis 127.0.0.1:6379> ZRANGE runoobkey 0 10 WITHSCORES</p><ol><li>&ldquo;redis&rdquo;</li><li>&ldquo;1&rdquo;</li><li>&ldquo;mongodb&rdquo;</li><li>&ldquo;2&rdquo;</li><li>&ldquo;mysql&rdquo;</li><li>&ldquo;4&rdquo;<br>在以上实例中我们通过命令 ZADD 向 redis 的有序集合中添加了三个值并关联上分数。</li></ol><p>Redis 有序集合命令<br>下表列出了 redis 有序集合的基本命令:<br>序号 命令及描述<br>1 ZADD key score1 member1 [score2 member2]<br>向有序集合添加一个或多个成员，或者更新已存在成员的分数<br>2 ZCARD key<br>获取有序集合的成员数<br>3 ZCOUNT key min max<br>计算在有序集合中指定区间分数的成员数<br>4 ZINCRBY key increment member<br>有序集合中对指定成员的分数加上增量 increment<br>5 ZINTERSTORE destination numkeys key [key …]<br>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中<br>6 ZLEXCOUNT key min max<br>在有序集合中计算指定字典区间内成员数量<br>7 ZRANGE key start stop [WITHSCORES]<br>通过索引区间返回有序集合成指定区间内的成员<br>8 ZRANGEBYLEX key min max [LIMIT offset count]<br>通过字典区间返回有序集合的成员<br>9 ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT]<br>通过分数返回有序集合指定区间内的成员<br>10 ZRANK key member<br>返回有序集合中指定成员的索引<br>11 ZREM key member [member …]<br>移除有序集合中的一个或多个成员<br>12 ZREMRANGEBYLEX key min max<br>移除有序集合中给定的字典区间的所有成员<br>13 ZREMRANGEBYRANK key start stop<br>移除有序集合中给定的排名区间的所有成员<br>14 ZREMRANGEBYSCORE key min max<br>移除有序集合中给定的分数区间的所有成员<br>15 ZREVRANGE key start stop [WITHSCORES]<br>返回有序集中指定区间内的成员，通过索引，分数从高到底<br>16 ZREVRANGEBYSCORE key max min [WITHSCORES]<br>返回有序集中指定分数区间内的成员，分数从高到低排序<br>17 ZREVRANK key member<br>返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序<br>18 ZSCORE key member<br>返回有序集中，成员的分数值<br>19 ZUNIONSTORE destination numkeys key [key …]<br>计算给定的一个或多个有序集的并集，并存储在新的 key 中<br>20 ZSCAN key cursor [MATCH pattern] [COUNT count]<br>迭代有序集合中的元素（包括元素成员和元素分值）<br>Redis HyperLogLog<br>Redis 在 2.8.9 版本添加了 HyperLogLog 结构。<br>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。<br>在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基 数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。<br>但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。</p><p>什么是基数?<br>比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。</p><p>实例<br>以下实例演示了 HyperLogLog 的工作过程：<br>redis 127.0.0.1:6379> PFADD runoobkey &ldquo;redis&rdquo;</p><ol><li>(integer) 1</li></ol><p>redis 127.0.0.1:6379> PFADD runoobkey &ldquo;mongodb&rdquo;</p><ol><li>(integer) 1</li></ol><p>redis 127.0.0.1:6379> PFADD runoobkey &ldquo;mysql&rdquo;</p><ol><li>(integer) 1</li></ol><p>redis 127.0.0.1:6379> PFCOUNT runoobkey</p><p>(integer) 3</p><p>Redis HyperLogLog 命令<br>下表列出了 redis HyperLogLog 的基本命令：<br>序号 命令及描述<br>1 PFADD key element [element …]<br>添加指定元素到 HyperLogLog 中。<br>2 PFCOUNT key [key …]<br>返回给定 HyperLogLog 的基数估算值。<br>3 PFMERGE destkey sourcekey [sourcekey …]<br>将多个 HyperLogLog 合并为一个 HyperLogLog<br>Redis 发布订阅<br>Redis 发布订阅(pub/sub)是一种消息通信模式：发送者(pub)发送消息，订阅者(sub)接收消息。<br>Redis 客户端可以订阅任意数量的频道。<br>下图展示了频道 channel1 ， 以及订阅这个频道的三个客户端 —— client2 、 client5 和 client1 之间的关系：</p><p>当有新消息通过 PUBLISH 命令发送给频道 channel1 时， 这个消息就会被发送给订阅它的三个客户端：</p><p>实例<br>以下实例演示了发布订阅是如何工作的。在我们实例中我们创建了订阅频道名为 redisChat:<br>redis 127.0.0.1:6379> SUBSCRIBE redisChat</p><p>Reading messages… (press Ctrl-C to quit)</p><ol><li>&ldquo;subscribe&rdquo;</li><li>&ldquo;redisChat&rdquo;</li><li>(integer) 1<br>现在，我们先重新开启个 redis 客户端，然后在同一个频道 redisChat 发布两次消息，订阅者就能接收到消息。<br>redis 127.0.0.1:6379> PUBLISH redisChat &ldquo;Redis is a great caching technique&rdquo;</li></ol><p>(integer) 1</p><p>redis 127.0.0.1:6379> PUBLISH redisChat &ldquo;Learn redis by runoob.com&rdquo;</p><p>(integer) 1</p><h1 class="relative group">订阅者的客户端会显示如下消息<div id=-11 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-11 aria-label=锚点>#</a></span></h1><ol><li>&ldquo;message&rdquo;</li><li>&ldquo;redisChat&rdquo;</li><li>&ldquo;Redis is a great caching technique&rdquo;</li><li>&ldquo;message&rdquo;</li><li>&ldquo;redisChat&rdquo;</li><li>&ldquo;Learn redis by runoob.com&rdquo;</li></ol><p>Redis 发布订阅命令<br>下表列出了 redis 发布订阅常用命令：<br>序号 命令及描述<br>1 PSUBSCRIBE pattern [pattern …]<br>订阅一个或多个符合给定模式的频道。<br>2 PUBSUB subcommand [argument [argument …]]<br>查看订阅与发布系统状态。<br>3 PUBLISH channel message<br>将信息发送到指定的频道。<br>4 PUNSUBSCRIBE [pattern [pattern …]]<br>退订所有给定模式的频道。<br>5 SUBSCRIBE channel [channel …]<br>订阅给定的一个或多个频道的信息。<br>6 UNSUBSCRIBE [channel [channel …]]<br>指退订给定的频道。<br>Redis 事务<br>Redis 事务可以一次执行多个命令， 并且带有以下两个重要的保证：<br>批量操作在发送 EXEC 命令前被放入队列缓存。<br>收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。<br>在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。<br>一个事务从开始到执行会经历以下三个阶段：<br>开始事务。<br>命令入队。<br>执行事务。</p><p>实例<br>以下是一个事务的例子， 它先以 MULTI 开始一个事务， 然后将多个命令入队到事务中， 最后由 EXEC 命令触发事务， 一并执行事务中的所有命令：<br>redis 127.0.0.1:6379> MULTI<br>OK</p><p>redis 127.0.0.1:6379> SET book-name &ldquo;Mastering C++ in 21 days&rdquo;<br>QUEUED</p><p>redis 127.0.0.1:6379> GET book-name<br>QUEUED</p><p>redis 127.0.0.1:6379> SADD tag &ldquo;C++&rdquo; &ldquo;Programming&rdquo; &ldquo;Mastering Series&rdquo;<br>QUEUED</p><p>redis 127.0.0.1:6379> SMEMBERS tag<br>QUEUED</p><p>redis 127.0.0.1:6379> EXEC</p><ol><li>OK</li><li>&ldquo;Mastering C++ in 21 days&rdquo;</li><li>(integer) 3</li><li><ol><li>&ldquo;Mastering Series&rdquo;</li></ol></li><li>&ldquo;C++&rdquo;</li><li>&ldquo;Programming&rdquo;<br>单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的执行并不是原子性的。<br>事务可以理解为一个打包的批量执行脚本，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做。<br>这是官网上的说明 From redis docs on transactions:<br>It&rsquo;s important to note that even when a command fails, all the other commands in the queue are processed – Redis will not stop the processing of commands.<br>比如：<br>redis 127.0.0.1:7000> multi<br>OK<br>redis 127.0.0.1:7000> set a aaa<br>QUEUED<br>redis 127.0.0.1:7000> set b bbb<br>QUEUED<br>redis 127.0.0.1:7000> set c ccc<br>QUEUED<br>redis 127.0.0.1:7000> exec</li><li>OK</li><li>OK</li><li>OK<br>如果在 set b bbb 处失败，set a 已成功不会回滚，set c 还会继续执行。</li></ol><p>Redis 事务命令<br>下表列出了 redis 事务的相关命令：<br>序号 命令及描述<br>1 DISCARD<br>取消事务，放弃执行事务块内的所有命令。<br>2 EXEC<br>执行所有事务块内的命令。<br>3 MULTI<br>标记一个事务块的开始。<br>4 UNWATCH<br>取消 WATCH 命令对所有 key 的监视。<br>5 WATCH key [key …]<br>监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断<br>Redis 脚本<br>Redis 脚本使用 Lua 解释器来执行脚本。 Redis 2.6 版本通过内嵌支持 Lua 环境。执行脚本的常用命令为 EVAL。<br>语法<br>Eval 命令的基本语法如下：<br>redis 127.0.0.1:6379> EVAL script numkeys key [key …] arg [arg …]<br>实例<br>以下实例演示了 redis 脚本工作过程：<br>redis 127.0.0.1:6379> EVAL &ldquo;return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}&rdquo; 2 key1 key2 first second</p><ol><li>&ldquo;key1&rdquo;</li><li>&ldquo;key2&rdquo;</li><li>&ldquo;first&rdquo;</li><li>&ldquo;second&rdquo;</li></ol><p>Redis 脚本命令<br>下表列出了 redis 脚本常用命令：<br>序号 命令及描述<br>1 EVAL script numkeys key [key …] arg [arg …]<br>执行 Lua 脚本。<br>2 EVALSHA sha1 numkeys key [key …] arg [arg …]<br>执行 Lua 脚本。<br>3 SCRIPT EXISTS script [script …]<br>查看指定的脚本是否已经被保存在缓存当中。<br>4 SCRIPT FLUSH<br>从脚本缓存中移除所有脚本。<br>5 SCRIPT KILL<br>杀死当前正在运行的 Lua 脚本。<br>6 SCRIPT LOAD script<br>将脚本 script 添加到脚本缓存中，但并不立即执行这个脚本。<br>Redis 连接<br>Redis 连接命令主要是用于连接 redis 服务。<br>实例<br>以下实例演示了客户端如何通过密码验证连接到 redis 服务，并检测服务是否在运行：<br>redis 127.0.0.1:6379> AUTH &ldquo;password&rdquo;<br>OK<br>redis 127.0.0.1:6379> PING<br>PONG</p><p>Redis 连接命令<br>下表列出了 redis 连接的基本命令：<br>序号 命令及描述<br>1 AUTH password<br>验证密码是否正确<br>2 ECHO message<br>打印字符串<br>3 PING<br>查看服务是否运行<br>4 QUIT<br>关闭当前连接<br>5 SELECT index<br>切换到指定的数据库<br>Redis 服务器<br>Redis 服务器命令主要是用于管理 redis 服务。<br>实例<br>以下实例演示了如何获取 redis 服务器的统计信息：<br>redis 127.0.0.1:6379> INFO</p><h1 class="relative group">Server<div id=server class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#server aria-label=锚点>#</a></span></h1><p>redis_version:2.8.13<br>redis_git_sha1:00000000<br>redis_git_dirty:0<br>redis_build_id:c2238b38b1edb0e2<br>redis_mode:standalone<br>os:Linux 3.5.0-48-generic x86_64<br>arch_bits:64<br>multiplexing_api:epoll<br>gcc_version:4.7.2<br>process_id:3856<br>run_id:0e61abd297771de3fe812a3c21027732ac9f41fe<br>tcp_port:6379<br>uptime_in_seconds:11554<br>uptime_in_days:0<br>hz:10<br>lru_clock:16651447<br>config_file:</p><h1 class="relative group">Clients<div id=clients class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#clients aria-label=锚点>#</a></span></h1><p>connected_clients:1<br>client-longest_output_list:0<br>client-biggest_input_buf:0<br>blocked_clients:0</p><h1 class="relative group">Memory<div id=memory class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#memory aria-label=锚点>#</a></span></h1><p>used_memory:589016<br>used_memory_human:575.21K<br>used_memory_rss:2461696<br>used_memory_peak:667312<br>used_memory_peak_human:651.67K<br>used_memory_lua:33792<br>mem_fragmentation_ratio:4.18<br>mem_allocator:jemalloc-3.6.0</p><h1 class="relative group">Persistence<div id=persistence class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#persistence aria-label=锚点>#</a></span></h1><p>loading:0<br>rdb_changes_since_last_save:3<br>rdb_bgsave_in_progress:0<br>rdb_last_save_time:1409158561<br>rdb_last_bgsave_status:ok<br>rdb_last_bgsave_time_sec:0<br>rdb_current_bgsave_time_sec:-1<br>aof_enabled:0<br>aof_rewrite_in_progress:0<br>aof_rewrite_scheduled:0<br>aof_last_rewrite_time_sec:-1<br>aof_current_rewrite_time_sec:-1<br>aof_last_bgrewrite_status:ok<br>aof_last_write_status:ok</p><h1 class="relative group">Stats<div id=stats class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#stats aria-label=锚点>#</a></span></h1><p>total_connections_received:24<br>total_commands_processed:294<br>instantaneous_ops_per_sec:0<br>rejected_connections:0<br>sync_full:0<br>sync_partial_ok:0<br>sync_partial_err:0<br>expired_keys:0<br>evicted_keys:0<br>keyspace_hits:41<br>keyspace_misses:82<br>pubsub_channels:0<br>pubsub_patterns:0<br>latest_fork_usec:264</p><h1 class="relative group">Replication<div id=replication class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#replication aria-label=锚点>#</a></span></h1><p>role:master<br>connected_slaves:0<br>master_repl_offset:0<br>repl_backlog_active:0<br>repl_backlog_size:1048576<br>repl_backlog_first_byte_offset:0<br>repl_backlog_histlen:0</p><h1 class="relative group">CPU<div id=cpu class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cpu aria-label=锚点>#</a></span></h1><p>used_cpu_sys:10.49<br>used_cpu_user:4.96<br>used_cpu_sys_children:0.00<br>used_cpu_user_children:0.01</p><h1 class="relative group">Keyspace<div id=keyspace class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#keyspace aria-label=锚点>#</a></span></h1><p>db0:keys=94,expires=1,avg_ttl=41638810<br>db1:keys=1,expires=0,avg_ttl=0<br>db3:keys=1,expires=0,avg_ttl=0</p><p>Redis 服务器命令<br>下表列出了 redis 服务器的相关命令:<br>序号 命令及描述<br>1 BGREWRITEAOF<br>异步执行一个 AOF（AppendOnly File） 文件重写操作<br>2 BGSAVE<br>在后台异步保存当前数据库的数据到磁盘<br>3 CLIENT KILL [ip:port] [ID client-id]<br>关闭客户端连接<br>4 CLIENT LIST<br>获取连接到服务器的客户端连接列表<br>5 CLIENT GETNAME<br>获取连接的名称<br>6 CLIENT PAUSE timeout<br>在指定时间内终止运行来自客户端的命令<br>7 CLIENT SETNAME connection-name<br>设置当前连接的名称<br>8 CLUSTER SLOTS<br>获取集群节点的映射数组<br>9 COMMAND<br>获取 Redis 命令详情数组<br>10 COMMAND COUNT<br>获取 Redis 命令总数<br>11 COMMAND GETKEYS<br>获取给定命令的所有键<br>12 TIME<br>返回当前服务器时间<br>13 COMMAND INFO command-name [command-name …]<br>获取指定 Redis 命令描述的数组<br>14 CONFIG GET parameter<br>获取指定配置参数的值<br>15 CONFIG REWRITE<br>对启动 Redis 服务器时所指定的 redis.conf 配置文件进行改写<br>16 CONFIG SET parameter value<br>修改 redis 配置参数，无需重启<br>17 CONFIG RESETSTAT<br>重置 INFO 命令中的某些统计数据<br>18 DBSIZE<br>返回当前数据库的 key 的数量<br>19 DEBUG OBJECT key<br>获取 key 的调试信息<br>20 DEBUG SEGFAULT<br>让 Redis 服务崩溃<br>21 FLUSHALL<br>删除所有数据库的所有key<br>22 FLUSHDB<br>删除当前数据库的所有key<br>23 INFO [section]<br>获取 Redis 服务器的各种信息和统计数值<br>24 LASTSAVE<br>返回最近一次 Redis 成功将数据保存到磁盘上的时间，以 UNIX 时间戳格式表示<br>25 MONITOR<br>实时打印出 Redis 服务器接收到的命令，调试用<br>26 ROLE<br>返回主从实例所属的角色<br>27 SAVE<br>同步保存数据到硬盘<br>28 SHUTDOWN [NOSAVE] [SAVE]<br>异步保存数据到硬盘，并关闭服务器<br>29 SLAVEOF host port<br>将当前服务器转变为指定服务器的从属服务器(slave server)<br>30 SLOWLOG subcommand [argument]<br>管理 redis 的慢日志<br>31 SYNC<br>用于复制功能(replication)的内部命令<br>Redis 数据备份与恢复<br>Redis SAVE 命令用于创建当前数据库的备份。<br>语法<br>redis Save 命令基本语法如下：<br>redis 127.0.0.1:6379> SAVE<br>实例<br>redis 127.0.0.1:6379> SAVE<br>OK<br>该命令将在 redis 安装目录中创建dump.rdb文件。</p><p>恢复数据<br>如果需要恢复数据，只需将备份文件 (dump.rdb) 移动到 redis 安装目录并启动服务即可。获取 redis 目录可以使用 CONFIG 命令，如下所示：</p><p>redis 127.0.0.1:6379> CONFIG GET dir</p><ol><li>&ldquo;dir&rdquo;</li><li>&ldquo;/usr/local/redis/bin&rdquo;<br>以上命令 CONFIG GET dir 输出的 redis 安装目录为 /usr/local/redis/bin。</li></ol><p>Bgsave<br>创建 redis 备份文件也可以使用命令 BGSAVE，该命令在后台执行。<br>实例<br>127.0.0.1:6379> BGSAVE</p><p>Background saving started<br>Redis 安全<br>我们可以通过 redis 的配置文件设置密码参数，这样客户端连接到 redis 服务就需要密码验证，这样可以让你的 redis 服务更安全。<br>实例<br>我们可以通过以下命令查看是否设置了密码验证：<br>127.0.0.1:6379> CONFIG get requirepass</p><ol><li>&ldquo;requirepass&rdquo;</li><li>""<br>默认情况下 requirepass 参数是空的，这就意味着你无需通过密码验证就可以连接到 redis 服务。<br>你可以通过以下命令来修改该参数：<br>127.0.0.1:6379> CONFIG set requirepass &ldquo;runoob&rdquo;<br>OK<br>127.0.0.1:6379> CONFIG get requirepass</li><li>&ldquo;requirepass&rdquo;</li><li>&ldquo;runoob&rdquo;<br>设置密码后，客户端连接 redis 服务就需要密码验证，否则无法执行命令。<br>语法<br>AUTH 命令基本语法格式如下：<br>127.0.0.1:6379> AUTH password<br>实例<br>127.0.0.1:6379> AUTH &ldquo;runoob&rdquo;<br>OK<br>127.0.0.1:6379> SET mykey &ldquo;Test value&rdquo;<br>OK<br>127.0.0.1:6379> GET mykey<br>&ldquo;Test value&rdquo;<br>Redis 性能测试<br>Redis 性能测试是通过同时执行多个命令实现的。<br>语法<br>redis 性能测试的基本命令如下：<br>redis-benchmark [option] [option value]<br>实例<br>以下实例同时执行 10000 个请求来检测性能：<br>$ redis-benchmark -n 10000 -q</li></ol><p>PING_INLINE: 141043.72 requests per second<br>PING_BULK: 142857.14 requests per second<br>SET: 141442.72 requests per second<br>GET: 145348.83 requests per second<br>INCR: 137362.64 requests per second<br>LPUSH: 145348.83 requests per second<br>LPOP: 146198.83 requests per second<br>SADD: 146198.83 requests per second<br>SPOP: 149253.73 requests per second<br>LPUSH (needed to benchmark LRANGE): 148588.42 requests per second<br>LRANGE_100 (first 100 elements): 58411.21 requests per second<br>LRANGE_300 (first 300 elements): 21195.42 requests per second<br>LRANGE_500 (first 450 elements): 14539.11 requests per second<br>LRANGE_600 (first 600 elements): 10504.20 requests per second<br>MSET (10 keys): 93283.58 requests per second<br>redis 性能测试工具可选参数如下所示：<br>序号 选项 描述 默认值<br>1 -h 指定服务器主机名 127.0.0.1<br>2 -p 指定服务器端口 6379<br>3 -s 指定服务器 socket<br>4 -c 指定并发连接数 50<br>5 -n 指定请求数 10000<br>6 -d 以字节的形式指定 SET/GET 值的数据大小 2<br>7 -k 1=keep alive 0=reconnect 1<br>8 -r SET/GET/INCR 使用随机 key, SADD 使用随机值<br>9 -P 通过管道传输 <numreq>请求 1<br>10 -q 强制退出 redis。仅显示 query/sec 值<br>11 &ndash;csv 以 CSV 格式输出<br>12 -l 生成循环，永久执行测试<br>13 -t 仅运行以逗号分隔的测试命令列表。<br>14 -I Idle 模式。仅打开 N 个 idle 连接并等待。<br>实例<br>以下实例我们使用了多个参数来测试 redis 性能：<br>$ redis-benchmark -h 127.0.0.1 -p 6379 -t set,lpush -n 10000 -q</p><p>SET: 146198.83 requests per second<br>LPUSH: 145560.41 requests per second<br>以上实例中主机为 127.0.0.1，端口号为 6379，执行的命令为 set,lpush，请求数为 10000，通过 -q 参数让结果只显示每秒执行的请求数。<br>Redis 客户端连接<br>Redis 通过监听一个 TCP 端口或者 Unix socket 的方式来接收来自客户端的连接，当一个连接建立后，Redis 内部会进行以下一些操作：<br>首先，客户端 socket 会被设置为非阻塞模式，因为 Redis 在网络事件处理上采用的是非阻塞多路复用模型。<br>然后为这个 socket 设置 TCP_NODELAY 属性，禁用 Nagle 算法<br>然后创建一个可读的文件事件用于监听这个客户端 socket 的数据发送</p><p>最大连接数<br>在 Redis2.4 中，最大连接数是被直接硬编码在代码里面的，而在2.6版本中这个值变成可配置的。<br>maxclients 的默认值是 10000，你也可以在 redis.conf 中对这个值进行修改。<br>config get maxclients</p><ol><li>&ldquo;maxclients&rdquo;</li><li>&ldquo;10000&rdquo;<br>实例<br>以下实例我们在服务启动时设置最大连接数为 100000：<br>redis-server &ndash;maxclients 100000</li></ol><p>客户端命令<br>S.N. 命令 描述<br>1 CLIENT LIST 返回连接到 redis 服务的客户端列表<br>2 CLIENT SETNAME 设置当前连接的名称<br>3 CLIENT GETNAME 获取通过 CLIENT SETNAME 命令设置的服务名称<br>4 CLIENT PAUSE 挂起客户端连接，指定挂起的时间以毫秒计<br>5 CLIENT KILL 关闭客户端连<br>Redis 管道技术<br>Redis 管道技术可以在服务端未响应时，客户端可以继续向服务端发送请求，并最终一次性读取所有服务端的响应。<br>实例<br>查看 redis 管道，只需要启动 redis 实例并输入以下命令：<br>$(echo -en &ldquo;PING\r\n SET runoobkey redis\r\nGET runoobkey\r\nINCR visitor\r\nINCR visitor\r\nINCR visitor\r\n&rdquo;; sleep 10) | nc localhost 6379</p><p>+PONG<br>+OK<br>redis<br>:1<br>:2<br>:3<br>以上实例中我们通过使用 PING 命令查看redis服务是否可用， 之后我们设置了 runoobkey 的值为 redis，然后我们获取 runoobkey 的值并使得 visitor 自增 3 次。<br>在返回的结果中我们可以看到这些命令一次性向 redis 服务提交，并最终一次性读取所有服务端的响应</p><p>管道技术的优势<br>管道技术最显著的优势是提高了 redis 服务的性能。<br>一些测试数据<br>在下面的测试中，我们将使用Redis的Ruby客户端，支持管道技术特性，测试管道技术对速度的提升效果。<br>require &lsquo;rubygems&rsquo;<br>require &lsquo;redis&rsquo;<br>def bench(descr)<br>start = Time.now<br>yield<br>puts &ldquo;#{descr} #{Time.now-start} seconds&rdquo;<br>end<br>def without_pipelining<br>r = Redis.new<br>10000.times {<br>r.ping<br>}<br>end<br>def with_pipelining<br>r = Redis.new<br>r.pipelined {<br>10000.times {<br>r.ping<br>}<br>}<br>end<br>bench(&ldquo;without pipelining&rdquo;) {<br>without_pipelining<br>}<br>bench(&ldquo;with pipelining&rdquo;) {<br>with_pipelining<br>}<br>从处于局域网中的Mac OS X系统上执行上面这个简单脚本的数据表明，开启了管道操作后，往返延时已经被改善得相当低了。<br>without pipelining 1.185238 seconds<br>with pipelining 0.250783 seconds<br>如你所见，开启管道后，我们的速度效率提升了5倍<br>Redis 分区<br>分区是分割数据到多个Redis实例的处理过程，因此每个实例只保存key的一个子集。<br>分区的优势<br>通过利用多台计算机内存的和值，允许我们构造更大的数据库。<br>通过多核和多台计算机，允许我们扩展计算能力；通过多台计算机和网络适配器，允许我们扩展网络带宽。<br>分区的不足<br>redis的一些特性在分区方面表现的不是很好：<br>涉及多个key的操作通常是不被支持的。举例来说，当两个set映射到不同的redis实例上时，你就不能对这两个set执行交集操作。<br>涉及多个key的redis事务不能使用。<br>当使用分区时，数据处理较为复杂，比如你需要处理多个rdb/aof文件，并且从多个实例和主机备份持久化文件。<br>增加或删除容量也比较复杂。redis集群大多数支持在运行时增加、删除节点的透明数据平衡的能力，但是类似于客户端分区、代理等其他系统则不支持这项特性。然而，一种叫做presharding的技术对此是有帮助的。</p><p>分区类型<br>Redis 有两种类型分区。 假设有4个Redis实例 R0，R1，R2，R3，和类似user:1，user:2这样的表示用户的多个key，对既定的key有多种不同方式来选择这个key存放在哪个实例中。也就是说，有不同的系统来映射某个key到某个Redis服务。<br>范围分区<br>最简单的分区方式是按范围分区，就是映射一定范围的对象到特定的Redis实例。<br>比如，ID从0到10000的用户会保存到实例R0，ID从10001到 20000的用户会保存到R1，以此类推。<br>这种方式是可行的，并且在实际中使用，不足就是要有一个区间范围到实例的映射表。这个表要被管理，同时还需要各 种对象的映射表，通常对Redis来说并非是好的方法。<br>哈希分区<br>另外一种分区方法是hash分区。这对任何key都适用，也无需是object_name:这种形式，像下面描述的一样简单：<br>用一个hash函数将key转换为一个数字，比如使用crc32 hash函数。对key foobar执行crc32(foobar)会输出类似93024922的整数。<br>对这个整数取模，将其转化为0-3之间的数字，就可以将这个整数映射到4个Redis实例中的一个了。93024922 % 4 = 2，就是说key foobar应该被存到R2实例中。注意：取模操作是取除的余数，通常在多种编程语言中用%操作符实现。</p></div></div><script>var oid="views_posts/2020-05-07-redis相关命令及安全技术.md",oid_likes="likes_posts/2020-05-07-redis相关命令及安全技术.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/2499.html><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">mysql数据库备份shell脚本—直接拿来用的shell脚本</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2020-05-07T11:19:12+08:00>2020年05月07日</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/2507.html><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">FileZilla-Server-FTP的主动模式和被动模式</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2020-05-08T04:35:51+08:00>2020年05月08日</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=返回顶部 title=返回顶部>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/tags/ title>标签</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/categories/ title>分类</a></li></ul></nav><div class="flex items-center justify-between"></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script><head><meta charset=UTF-8></head><footer style="text-align:center;padding:20px 0;font-size:14px;color:#fff;background-color:transparent"><div style=margin-bottom:15px;font-size:18px>🌐 <strong style=font-size:16px>云原生知识栈 | www.kubehan.cn</strong></div><div style=margin-bottom:15px><span class=icp><a class=icp target=_blank href=https://beian.miit.gov.cn/ style=color:#4da8da;text-decoration:none;font-weight:700>黔ICP备20000869号-2
</a></span><span style=margin-left:10px>| 归属地：贵州省贵阳市</span></div><div style=margin-bottom:10px;font-size:14px><span>总访问量：</span>
<strong id=total-visits style=color:#4da8da>加载中...</strong>
<span style=margin-left:10px>| 今日访问量：</span>
<strong id=today-visits style=color:#4da8da>加载中...</strong></div><div style=margin-top:15px;font-size:12px;opacity:.8><a href=https://kubehan.cn/categories/ target=_blank style=color:#4da8da;text-decoration:none;margin-right:15px>关于本站
</a><a href=https://kubehan.cn/%E5%85%B3%E4%BA%8E%E6%88%91/wechat_qr_code.png target=_blank style=color:#4da8da;text-decoration:none;margin-right:15px>联系我们
</a><a href=https://kubehan.cn/index.xml target=_blank style=color:#4da8da;text-decoration:none>订阅</a></div><script>document.addEventListener("DOMContentLoaded",function(){let s=100230,e=localStorage.getItem("totalVisits"),t=localStorage.getItem("todayVisits");e||(e=s),t||(t=0);let n=Math.floor(Math.random()*8)+1;t=parseInt(t)+n,e=parseInt(e)+n,e<t&&(e=t+e),localStorage.setItem("totalVisits",e),localStorage.setItem("todayVisits",t),document.getElementById("total-visits").textContent=e,document.getElementById("today-visits").textContent=t})</script></footer></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://kubehan.cn/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=搜索 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="关闭 (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>